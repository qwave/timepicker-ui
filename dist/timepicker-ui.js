"use strict";function e(e,i,t,s){return new(t||(t=Promise))((function(o,l){function n(e){try{a(s.next(e))}catch(e){l(e)}}function r(e){try{a(s.throw(e))}catch(e){l(e)}}function a(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(n,r)}a((s=s.apply(e,i||[])).next())}))}Object.defineProperty(exports,"__esModule",{value:!0});const i=(e,i)=>{const{touches:t}=e,{clientX:s,clientY:o}=e;if(!i)return;const{left:l,top:n}=i.getBoundingClientRect();let r={x:0,y:0};if(void 0===t)r={x:s-l,y:o-n};else if(void 0!==t&&t.length>0&&Object.keys(t).length>0){const{clientX:e,clientY:i}=t[0];r={x:e-l,y:i-n}}return 0!==Object.keys(r).length||r.constructor!==Object?r:void 0},t=(e,i)=>!!e&&e.classList.contains(i),s=(e,i,t)=>{if(!e)return;const s=new CustomEvent(i,{detail:t});e.dispatchEvent(s)},o=(e,i,t)=>((e,i)=>Math.round(e/i)*i)(e,i*t),l=(e,i)=>Array.from({length:Number(i)-Number(e)+1},((i,t)=>Number(e)+t)),n=(e,i)=>Array.from({length:Number(i)-Number(e)+1},((e,t)=>Number(i)-t)).reverse(),r=e=>{e&&"function"==typeof e&&e()},a=(e="")=>{const i=e.replace(/(AM|PM|am|pm)/,(e=>` ${e}`)),t=new Date(`September 20, 2000 ${i}`);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},u=(e,i,t,s)=>{if(!e)return{hour:"12",minutes:"00",type:"24h"===i?void 0:"PM"};const{value:o}=e;if(t){if("boolean"==typeof t&&t){const[e,t]=(new Date).toLocaleTimeString().split(":");if(/[a-z]/i.test(t)&&"12h"===i){const[i,s]=t.split(" ");return{hour:Number(e)<=9?`0${Number(e)}`:e,minutes:i,type:s}}return{hour:Number(e)<=9?`0${Number(e)}`:e,minutes:t,type:void 0}}{const{time:e,locales:o,preventClockType:l}=t;let n=e;if(e||(n=new Date),l&&s){const[e,i]=new Date(n).toLocaleTimeString().split(":");if(/[a-z]/i.test(i)){const[t,s]=i.split(" ");return{hour:e,minutes:t,type:s}}return{hour:Number(e)<=9?`0${Number(e)}`:e,minutes:i,type:void 0}}const[r,a]=new Date(n).toLocaleTimeString(o,{timeStyle:"short"}).split(":");if(/[a-z]/i.test(a)&&"12h"===i){const[e,i]=a.split(" ");return{hour:Number(r)<=9?`0${Number(r)}`:r,minutes:e,type:i}}if("12h"===i){const[e,i]=new Date(`1970-01-01T${r}:${a}Z`).toLocaleTimeString("en-US",{timeZone:"UTC",hour12:!0,hour:"numeric",minute:"numeric"}).split(":"),[t,s]=i.split(" ");return{hour:Number(e)<=9?`0${Number(e)}`:r,minutes:t,type:s}}return{hour:Number(r)<=9?`0${Number(r)}`:r,minutes:a,type:void 0}}}if(""===o||!o)return{hour:"12",minutes:"00",type:"24h"===i?void 0:"PM"};const[l,n]=o.split(" "),[r,a]=l.split(":");if(/[a-z]/i.test(l))return{error:"The input contains invalid letters or whitespace."};if(o.includes(" ")){if(!n)return{error:`The input contains invalid letters or whitespace.\n        Problem is with input length (max 5), currentLength: ${o.length}.`,currentLength:o.length};if(o.length>8||"AM"!==n&&"PM"!==n)return{error:`The input contains invalid letters or whitespace.\n        Problem is with input length (max 8), currentLength: ${o.length} or invalid type (PM or AM), currentType: ${n}.`,currentLength:o.length,currentType:n}}let u=Number(a);const d=Number(r);return u<10?u=`0${u}`:0===u&&(u="00"),"12h"===i?d>12||u>59||u<0||0===d||"AM"!==n&&"PM"!==n?{error:`The input contains invalid letters or numbers. Problem is with hour which should be less than 13 and higher or equal 0, currentHour: ${d}. Minutes should be less than 60 and higher or equal 0, currentMinutes: ${Number(u)} or invalid type (PM or AM), currentType: ${n}.`,currentHour:d,currentMin:u,currentType:n}:{hour:d<10?`0${d}`:d.toString(),minutes:u.toString(),type:n}:d<0||d>23||u>59?{error:`The input contains invalid numbers. Problem is with hour which should be less than 24 and higher or equal 0, currentHour: ${d}. Minutes should be less than 60 and higher or equal 0, currentMinutes: ${Number(u)}`,currentHour:d,currentMin:u}:{hour:d<10?`0${d}`:d.toString(),minutes:u.toString()}},d=(e,i,t)=>{const s=Number(e);return"hour"===i?"24h"!==t?s>0&&s<=12:s>=0&&s<=23:"minutes"===i?s>=0&&s<=59:void 0},h=(e,i,t,s)=>{if(e){if(Array.isArray(e)&&e.length>0){return!e.map((e=>d(e,i,t))).some((e=>!1===e))}if("string"==typeof e||"number"==typeof e){const o=d(e,i,t),l=null==s?void 0:s.map(Number).includes(Number(e));return!(!o||l)}}};var c=":export {\n  cranepurple800: #5c1349;\n  cranepurple900: #4e0d3a;\n  cranepurple700: #71135c;\n  cranered400: #f7363e;\n  white: #fff;\n  purple: #6200ee;\n  opacity: opacity 0.15s linear;\n}";!function(e,i){void 0===i&&(i={});var t=i.insertAt;if(e&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(c);const v={amLabel:"AM",animation:!0,appendModalSelector:"",backdrop:!0,cancelLabel:"CANCEL",editable:!1,enableScrollbar:!1,enableSwitchIcon:!1,mobileTimeLabel:"Enter Time",focusInputAfterCloseModal:!1,hourMobileLabel:"Hour",iconTemplate:'<i class="material-icons timepicker-ui-keyboard-icon">keyboard</i>',iconTemplateMobile:'<i class="material-icons timepicker-ui-keyboard-icon">schedule</i>',incrementHours:1,incrementMinutes:1,minuteMobileLabel:"Minute",mobile:!1,okLabel:"OK",pmLabel:"PM",timeLabel:"Select Time",switchToMinutesAfterSelectHour:!1,theme:"basic",clockType:"12h",disabledTime:void 0,currentTime:void 0,focusTrap:!0,delayHandler:300},m="mousedown mouseup mousemove mouseleave mouseover touchstart touchmove touchend",p="active",b=["00","13","14","15","16","17","18","19","20","21","22","23"],_=["12","1","2","3","4","5","6","7","8","9","10","11"],T=["00","05","10","15","20","25","30","35","40","45","50","55"];class k{constructor(e){this.clean=()=>{var e,i;const t=null===(e=this.tipsWrapper)||void 0===e?void 0:e.querySelectorAll("span.timepicker-ui-hour-time-12"),s=null===(i=this.tipsWrapper)||void 0===i?void 0:i.querySelectorAll("span.timepicker-ui-minutes-time");this._removeClasses(t),this._removeClasses(s)},this.create=()=>{var e;if(!(this.clockFace&&this.array&&this.classToAdd&&this.tipsWrapper))return;const i=(this.clockFace.offsetWidth-32)/2,s=(this.clockFace.offsetHeight-32)/2,o=i-9;this.tipsWrapper.innerHTML="",null===(e=this.array)||void 0===e||e.forEach(((e,l)=>{var n,r,a,u,d,h;const c=l*(360/this.array.length)*(Math.PI/180);const v=document.createElement("span"),m=document.createElement("span");m.innerHTML=e,this.disabledTime&&(Array.isArray(this.disabledTime)&&(null===(n=this.disabledTime)||void 0===n?void 0:n.includes(e))&&(m.classList.add("timepicker-ui-tips-disabled"),v.classList.add("timepicker-ui-tips-disabled")),this.hour===this.disabledTime.removedStartedHour&&(null===(a=null===(r=this.disabledTime)||void 0===r?void 0:r.startMinutes)||void 0===a?void 0:a.includes(e))&&(m.classList.add("timepicker-ui-tips-disabled"),v.classList.add("timepicker-ui-tips-disabled"),m.tabIndex=-1),this.hour===this.disabledTime.removedEndHour&&(null===(d=null===(u=this.disabledTime)||void 0===u?void 0:u.endMinutes)||void 0===d?void 0:d.includes(e))&&(m.classList.add("timepicker-ui-tips-disabled"),v.classList.add("timepicker-ui-tips-disabled"),m.tabIndex=-1)),"24h"===this.clockType?(m.classList.add("timepicker-ui-value-tips-24h"),t(m,"timepicker-ui-tips-disabled")||(m.tabIndex=0)):(m.classList.add("timepicker-ui-value-tips"),t(m,"timepicker-ui-tips-disabled")||(m.tabIndex=0)),v.classList.add(this.classToAdd),"crane-straight"===this.theme&&(v.classList.add("crane-straight"),m.classList.add("crane-straight")),"m3"===this.theme&&(v.classList.add("m3"),m.classList.add("m3")),v.style.left=i+Math.sin(c)*o-v.offsetWidth+"px",v.style.bottom=s+Math.cos(c)*o-v.offsetHeight+"px",v.appendChild(m),null===(h=this.tipsWrapper)||void 0===h||h.appendChild(v)}))},this.updateDisable=e=>{var i,t;const s=null===(i=this.tipsWrapper)||void 0===i?void 0:i.querySelectorAll("span.timepicker-ui-hour-time-12"),o=null===(t=this.tipsWrapper)||void 0===t?void 0:t.querySelectorAll("span.timepicker-ui-minutes-time");if(this._removeClasses(s),this._removeClasses(o),(null==e?void 0:e.hoursToUpdate)&&s&&this._addClassesWithIncludes(s,e.hoursToUpdate),(null==e?void 0:e.minutesToUpdate)&&o){const{actualHour:i,removedEndHour:t,removedStartedHour:s,startMinutes:l,endMinutes:n}=e.minutesToUpdate;t===i&&n.length>0?this._addClassesWithIncludes(o,n):Number(i)>Number(s)&&Number(i)<Number(t)&&this._addClasses(o),s===i&&l.length>0?this._addClassesWithIncludes(o,l):Number(i)>Number(s)&&Number(i)<Number(t)&&this._addClasses(o)}if(e){const{amHours:i,pmHours:t,activeMode:l,startMinutes:n,endMinutes:r,removedAmHour:a,removedPmHour:u,actualHour:d}=e.minutesToUpdate;if(!i||!t)return;s&&(i&&"AM"===l&&this._addClassesWithIncludes(s,i),t&&"PM"===l&&this._addClassesWithIncludes(s,t)),o&&n&&r&&("AM"===l&&("00"===r[0]&&1===r.length&&0===n.length&&Number(d)>=Number(i[0])&&this._addClasses(o),0===n.length&&r.length>1&&Number(d)>=Number(a)&&this._addClasses(o),n.length>0&&r.length>1&&"00"===r[0]&&(Number(a)===Number(d)?this._addClassesWithIncludes(o,n):Number(d)>Number(a)&&this._addClasses(o)),"00"===r[0]&&1===r.length&&n.length>0&&(Number(a)===Number(d)?this._addClassesWithIncludes(o,n):Number(d)>Number(a)&&this._addClasses(o))),"PM"===l&&(d<Number(u)&&this._addClasses(o),d===u&&this._addClassesWithIncludes(o,r),r.length>0&&Number(d)===u-1&&this._addClassesWithIncludes(o,r)))}},this._removeClasses=e=>{null==e||e.forEach((({classList:e,children:i})=>{e.remove("timepicker-ui-tips-disabled"),i[0].classList.remove("timepicker-ui-tips-disabled"),i[0].tabIndex=0}))},this._addClasses=e=>{null==e||e.forEach((({classList:e,children:i})=>{e.add("timepicker-ui-tips-disabled"),i[0].classList.add("timepicker-ui-tips-disabled"),i[0].tabIndex=-1}))},this._addClassesWithIncludes=(e,i)=>{null==e||e.forEach((({classList:e,children:t,textContent:s})=>{(null==i?void 0:i.includes(s))&&(e.add("timepicker-ui-tips-disabled"),t[0].classList.add("timepicker-ui-tips-disabled"),t[0].tabIndex=-1)}))},this.array=null==e?void 0:e.array,this.classToAdd=null==e?void 0:e.classToAdd,this.clockFace=null==e?void 0:e.clockFace,this.tipsWrapper=null==e?void 0:e.tipsWrapper,this.theme=null==e?void 0:e.theme,this.clockType=null==e?void 0:e.clockType,this.disabledTime=null==e?void 0:e.disabledTime,this.hour=null==e?void 0:e.hour}}const y=(e,i)=>{let t;return(...s)=>{clearTimeout(t),t=setTimeout((()=>{e(...s)}),i)}};exports.TimepickerUI=class{constructor(l,n){var g,M,f;this.create=()=>{this._updateInputValueWithCurrentTimeOnStart(),this._checkDisabledValuesOnStart(),this._setTimepickerClassToElement(),this._setInputClassToInputElement(),this._setDataOpenToInputIfDosentExistInWrapper(),this._setClassTopOpenElement(),this._handleOpenOnEnterFocus(),this._handleOpenOnClick(),this._getDisableTime()},this.open=e=>{this.create(),this._eventsBundle(),r(e)},this.close=()=>y(((...e)=>{var i;if(e.length>2||!this.modalElement)return;const[t]=e.filter((e=>"boolean"==typeof e)),[s]=e.filter((e=>"function"==typeof e));t&&(this._handleOkButton(),null===(i=this.okButton)||void 0===i||i.click()),this._isTouchMouseMove=!1,m.split(" ").map((e=>document.removeEventListener(e,this._mutliEventsMoveHandler,!1))),document.removeEventListener("mousedown",this._eventsClickMobileHandler),document.removeEventListener("touchstart",this._eventsClickMobileHandler),document.removeEventListener("keypress",this._handleEscClick),this.wrapper.removeEventListener("keydown",this._focusTrapHandler),this._options.enableSwitchIcon&&(this.keyboardClockIcon.removeEventListener("touchstart",this._handlerViewChange()),this.keyboardClockIcon.removeEventListener("mousedown",this._handlerViewChange())),this._removeAnimationToClose(),this.openElement.forEach((e=>null==e?void 0:e.classList.remove("disabled"))),setTimeout((()=>{document.body.style.overflowY="",document.body.style.paddingRight=""}),400),this.openElement.forEach((e=>null==e?void 0:e.classList.remove("disabled"))),setTimeout((()=>{var e;this._options.focusInputAfterCloseModal&&(null===(e=this.input)||void 0===e||e.focus()),null!==this.modalElement&&(this.modalElement.remove(),this._isModalRemove=!0)}),300),r(s)}),this._options.delayHandler||300),this.destroy=e=>{m.split(" ").map((e=>document.removeEventListener(e,this._mutliEventsMoveHandler,!1))),document.removeEventListener("mousedown",this._eventsClickMobileHandler),document.removeEventListener("touchstart",this._eventsClickMobileHandler),this._options.enableSwitchIcon&&this.keyboardClockIcon&&(this.keyboardClockIcon.removeEventListener("touchstart",this._handlerViewChange()),this.keyboardClockIcon.removeEventListener("mousedown",this._handlerViewChange())),this._cloned=this._element.cloneNode(!0),this._element.after(this._cloned),this._element.remove(),this._element=null,null===this._element&&r(e),this._element=this._cloned},this.update=(e,i)=>{this._options=Object.assign(Object.assign({},this._options),e.options),this._checkMobileOption(),e.create&&this.create(),r(i)},this._preventClockTypeByCurrentTime=()=>{var e,i,t,s,o;if("boolean"!=typeof(null===(e=this._options)||void 0===e?void 0:e.currentTime)&&(null===(t=null===(i=this._options)||void 0===i?void 0:i.currentTime)||void 0===t?void 0:t.preventClockType)||"boolean"==typeof(null===(s=this._options)||void 0===s?void 0:s.currentTime)&&(null===(o=this._options)||void 0===o?void 0:o.currentTime)){const{currentTime:e,clockType:i}=this._options,{type:t}=u(this.input,i,e,!0);this._options.clockType=t?"12h":"24h"}},this._updateInputValueWithCurrentTimeOnStart=()=>{var e,i,t,s,o;if("boolean"!=typeof(null===(e=this._options)||void 0===e?void 0:e.currentTime)&&(null===(t=null===(i=this._options)||void 0===i?void 0:i.currentTime)||void 0===t?void 0:t.updateInput)||"boolean"==typeof(null===(s=this._options)||void 0===s?void 0:s.currentTime)&&(null===(o=this._options)||void 0===o?void 0:o.currentTime)){const{hour:e,minutes:i,type:t}=u(this.input,this._options.clockType,this._options.currentTime);this.input.value=t?`${e}:${i} ${t}`:`${e}:${i}`}},this._setTheme=()=>{var e,i;const t=null===(e=this.modalElement)||void 0===e?void 0:e.querySelectorAll("div"),s=[...null===(i=this.modalElement)||void 0===i?void 0:i.querySelectorAll("input"),...t],{theme:o}=this._options;"crane-straight"===o?s.forEach((e=>e.classList.add("crane-straight"))):"crane-radius"===o?s.forEach((e=>e.classList.add("crane-straight","radius"))):"m3"===o&&s.forEach((e=>e.classList.add("m3")))},this._setInputClassToInputElement=()=>{var e;t(this.input,"timepicker-ui-input")||null===(e=this.input)||void 0===e||e.classList.add("timepicker-ui-input")},this._setDataOpenToInputIfDosentExistInWrapper=()=>{var e;null===this.openElementData&&(null===(e=this.input)||void 0===e||e.setAttribute("data-open","timepicker-ui-input"))},this._setClassTopOpenElement=()=>{this.openElement.forEach((e=>null==e?void 0:e.classList.add("timepicker-ui-open-element")))},this._removeBackdrop=()=>{var e;this._options.backdrop||(null===(e=this.modalElement)||void 0===e||e.classList.add("removed"),this.openElement.forEach((e=>null==e?void 0:e.classList.add("disabled"))))},this._setNormalizeClass=()=>{var e,i;const t=null===(e=this.modalElement)||void 0===e?void 0:e.querySelectorAll("div");null===(i=this.modalElement)||void 0===i||i.classList.add("timepicker-ui-normalize"),null==t||t.forEach((e=>e.classList.add("timepicker-ui-normalize")))},this._setFlexEndToFooterIfNoKeyboardIcon=()=>{!this._options.enableSwitchIcon&&this.footer&&(this.footer.style.justifyContent="flex-end")},this._eventsBundle=()=>{var e,i,t,s,o,l,n,r,a,u,d,h,c;if(this._isModalRemove){if(this._handleEscClick(),this._setErrorHandler(),this._removeErrorHandler(),this.openElement.forEach((e=>null==e?void 0:e.classList.add("disabled"))),null===(e=this.input)||void 0===e||e.blur(),this._setScrollbarOrNot(),this._setModalTemplate(),this._setNormalizeClass(),this._removeBackdrop(),this._setBgColorToCirleWithHourTips(),this._setOnStartCSSClassesIfClockType24h(),this._setClassActiveToHourOnOpen(),null!==this.clockFace){const e=new k({array:_,classToAdd:"timepicker-ui-hour-time-12",clockFace:this.clockFace,tipsWrapper:this.tipsWrapper,theme:this._options.theme,disabledTime:(null===(t=null===(i=this._disabledTime)||void 0===i?void 0:i.value)||void 0===t?void 0:t.isInterval)?null===(s=this._disabledTime)||void 0===s?void 0:s.value.rangeArrHour:null===(l=null===(o=this._disabledTime)||void 0===o?void 0:o.value)||void 0===l?void 0:l.hours,clockType:"12h",hour:this.hour.value});if(e.create(),"24h"===this._options.clockType){new k({array:b,classToAdd:"timepicker-ui-hour-time-24",clockFace:this.tipsWrapperFor24h,tipsWrapper:this.tipsWrapperFor24h,theme:this._options.theme,clockType:"24h",disabledTime:(null===(r=null===(n=this._disabledTime)||void 0===n?void 0:n.value)||void 0===r?void 0:r.isInterval)?null===(a=this._disabledTime)||void 0===a?void 0:a.value.rangeArrHour:null===(d=null===(u=this._disabledTime)||void 0===u?void 0:u.value)||void 0===d?void 0:d.hours,hour:this.hour.value}).create()}else(null===(h=this._disabledTime)||void 0===h?void 0:h.value.startType)===(null===(c=this._disabledTime)||void 0===c?void 0:c.value.endType)?setTimeout((()=>{var i,t,s,o,l,n,r,a;(null===(i=this._disabledTime)||void 0===i?void 0:i.value.startType)===(null===(t=this.activeTypeMode)||void 0===t?void 0:t.textContent)&&e.updateDisable({hoursToUpdate:null===(o=null===(s=this._disabledTime)||void 0===s?void 0:s.value)||void 0===o?void 0:o.rangeArrHour,minutesToUpdate:{endMinutes:null===(l=this._disabledTime)||void 0===l?void 0:l.value.endMinutes,removedEndHour:null===(n=this._disabledTime)||void 0===n?void 0:n.value.removedEndHour,removedStartedHour:null===(r=this._disabledTime)||void 0===r?void 0:r.value.removedStartedHour,actualHour:this.hour.value,startMinutes:null===(a=this._disabledTime)||void 0===a?void 0:a.value.startMinutes}})}),300):setTimeout((()=>{var i,t,s;e.updateDisable({minutesToUpdate:{actualHour:this.hour.value,pmHours:null===(i=this._disabledTime)||void 0===i?void 0:i.value.pmHours,amHours:null===(t=this._disabledTime)||void 0===t?void 0:t.value.amHours,activeMode:null===(s=this.activeTypeMode)||void 0===s?void 0:s.textContent}})}),300),e.updateDisable()}this._setFlexEndToFooterIfNoKeyboardIcon(),setTimeout((()=>{this._setTheme()}),0),this._setAnimationToOpen(),this._getInputValueOnOpenAndSet(),this._toggleClassActiveToValueTips(this.hour.value),this._isMobileView||(this._setTransformToCircleWithSwitchesHour(this.hour.value),this._handleAnimationClock()),this._handleMinutesEvents(),this._handleHourEvents(),"24h"!==this._options.clockType&&(this._handleAmClick(),this._handlePmClick()),this.clockFace&&this._handleMoveHand(),this._handleCancelButton(),this._handleOkButton(),this.modalElement&&(this._setShowClassToBackdrop(),this._handleBackdropClick()),this._handleIconChangeView(),this._handleClickOnHourMobile(),this._options.focusTrap&&this._focusTrapHandler()}},this._handleOpenOnClick=()=>{this.openElement.forEach((e=>this._clickTouchEvents.forEach((i=>null==e?void 0:e.addEventListener(i,(()=>this._eventsBundle()))))))},this._getInputValueOnOpenAndSet=()=>{var e,i;const t=u(this.input,this._options.clockType,this._options.currentTime);if(void 0===t)return this.hour.value="12",this.minutes.value="00",s(this._element,"show",{hour:this.hour.value,minutes:this.minutes.value,type:null===(e=this.activeTypeMode)||void 0===e?void 0:e.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes}),void("24h"!==this._options.clockType&&this.AM.classList.add(p));let[o,l,n]=this.input.value.split(":").join(" ").split(" ");0===this.input.value.length&&(o=t.hour,l=t.minutes,n=t.type),this.hour.value=o,this.minutes.value=l;const r=document.querySelector(`[data-type='${n}']`);"24h"!==this._options.clockType&&r&&r.classList.add(p),s(this._element,"show",Object.assign(Object.assign({},t),{type:null===(i=this.activeTypeMode)||void 0===i?void 0:i.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes}))},this._handleCancelButton=()=>{this._clickTouchEvents.forEach((e=>{this.cancelButton.addEventListener(e,(()=>{var e;const i=u(this.input,this._options.clockType);s(this._element,"cancel",Object.assign(Object.assign({},i),{hourNotAccepted:this.hour.value,minutesNotAccepted:this.minutes.value,type:null===(e=this.activeTypeMode)||void 0===e?void 0:e.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes})),this.close()()}))}))},this._handleOkButton=()=>{this._clickTouchEvents.forEach((e=>{var i;null===(i=this.okButton)||void 0===i||i.addEventListener(e,(()=>{var e,i,t;const{clockType:o,disabledTime:l}=this._options,n=d(this.hour.value,"hour",o),r=d(this.minutes.value,"minutes",o);let u;const c=h(this.hour.value,"hour",o,null==l?void 0:l.hours),v=h(this.minutes.value,"minutes",o,null==l?void 0:l.minutes);if((null==l?void 0:l.interval)&&(u=((e,i,t,s)=>{const o=t?a(`${e}:${i} ${t}`.trim()):`${e}:${i}`.trim();let l,n;if(t){const[e,i]=s.trim().split("-").map((e=>e.trim()));l=a(e),n=a(i)}else{const[e,i]=s.trim().split("-"),t=e=>e.trim().split(":").map((e=>Number(e)<=9?`0${Number(e)}`:e)).join(":");l=t(e),n=t(i)}return o<l||o>n})(this.hour.value,this.minutes.value,null===(e=this.activeTypeMode)||void 0===e?void 0:e.textContent,l.interval)),!1===u||!1===n||!1===r||!1===c||!1===v)return!1!==u&&r&&v||this.minutes.classList.add("invalid-value"),void(!1!==u&&n&&c||this.hour.classList.add("invalid-value"));this.input.value=`${this.hour.value}:${this.minutes.value} ${"24h"===this._options.clockType?"":null===(i=this.activeTypeMode)||void 0===i?void 0:i.dataset.type}`.trimEnd(),s(this._element,"accept",{hour:this.hour.value,minutes:this.minutes.value,type:null===(t=this.activeTypeMode)||void 0===t?void 0:t.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes}),this.close()()}))}))},this._setShowClassToBackdrop=()=>{this._options.backdrop&&setTimeout((()=>{this.modalElement.classList.add("show")}),300)},this._handleBackdropClick=()=>{var e;null===(e=this.modalElement)||void 0===e||e.addEventListener("click",(e=>{var i;const o=e.target;if(!t(o,"timepicker-ui-modal"))return;const l=u(this.input,this._options.clockType);s(this._element,"cancel",Object.assign(Object.assign({},l),{hourNotAccepted:this.hour.value,minutesNotAccepted:this.minutes.value,type:null===(i=this.activeTypeMode)||void 0===i?void 0:i.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes})),this.close()()}))},this._setBgColorToCirleWithHourTips=()=>{if(!this._options)return;const{mobile:e,theme:i}=this._options;e||null===this.circle||(this.circle.style.backgroundColor="crane-straight"===i||"crane-radius"===i?c.cranered400:c.purple)},this._setBgColorToCircleWithMinutesTips=()=>{const{theme:e}=this._options;this.minutes.value&&T.includes(this.minutes.value)&&(this.circle.style.backgroundColor="crane-straight"===e||"crane-radius"===e?c.cranered400:c.purple,this.circle.classList.remove("small-circle"))},this._removeBgColorToCirleWithMinutesTips=()=>{this.minutes.value&&T.includes(this.minutes.value)||(this.circle.style.backgroundColor="",this.circle.classList.add("small-circle"))},this._setTimepickerClassToElement=()=>{var e;null===(e=this._element)||void 0===e||e.classList.add("timepicker-ui")},this._setClassActiveToHourOnOpen=()=>{var e;this._options.mobile||this._isMobileView||null===(e=this.hour)||void 0===e||e.classList.add(p)},this._setMinutesToClock=e=>{var i,t,s,o,l;null!==this.clockFace&&this._setTransformToCircleWithSwitchesMinutes(e),this._removeBgColorToCirleWithMinutesTips();const n=(null===(t=null===(i=this._disabledTime)||void 0===i?void 0:i.value)||void 0===t?void 0:t.minutes)?null===(o=null===(s=this._disabledTime)||void 0===s?void 0:s.value)||void 0===o?void 0:o.minutes:null===(l=this._disabledTime)||void 0===l?void 0:l.value,r=new k({array:T,classToAdd:"timepicker-ui-minutes-time",clockFace:this.clockFace,tipsWrapper:this.tipsWrapper,theme:this._options.theme,disabledTime:n,hour:this.hour.value,clockType:this._options.clockType});r.create(),"12h"===this._options.clockType&&r.updateDisable(),this._toggleClassActiveToValueTips(e),"24h"===this._options.clockType&&(this.tipsWrapperFor24h.innerHTML="")},this._setHoursToClock=e=>{var i,t,s,o,l;if(null!==this.clockFace){this._setTransformToCircleWithSwitchesHour(e),this._setBgColorToCirleWithHourTips();const n=(null===(t=null===(i=this._disabledTime)||void 0===i?void 0:i.value)||void 0===t?void 0:t.isInterval)?null===(s=this._disabledTime)||void 0===s?void 0:s.value.rangeArrHour:null===(l=null===(o=this._disabledTime)||void 0===o?void 0:o.value)||void 0===l?void 0:l.hours,r=new k({array:_,classToAdd:"timepicker-ui-hour-time-12",clockFace:this.clockFace,tipsWrapper:this.tipsWrapper,theme:this._options.theme,disabledTime:n,clockType:"12h",hour:this.hour.value});r.create(),"24h"===this._options.clockType?new k({array:b,classToAdd:"timepicker-ui-hour-time-24",clockFace:this.tipsWrapperFor24h,tipsWrapper:this.tipsWrapperFor24h,theme:this._options.theme,clockType:"24h",disabledTime:n,hour:this.hour.value}).create():r.updateDisable(),this._toggleClassActiveToValueTips(e)}},this._setTransformToCircleWithSwitchesHour=e=>{const i=Number(e);let t=i>12?30*i-360:30*i;360===t&&(t=0),t>360||(this.clockHand.style.transform=`rotateZ(${t}deg)`)},this._setTransformToCircleWithSwitchesMinutes=e=>{const i=6*Number(e);i>360||(this.clockHand.style.transform=`rotateZ(${i}deg)`)},this._handleAmClick=()=>{this._clickTouchEvents.forEach((e=>{this.AM.addEventListener(e,(e=>{var i,o,l,n;if(e.target.classList.add(p),this.PM.classList.remove(p),"12h"===this._options.clockType&&(null===(i=this._options.disabledTime)||void 0===i?void 0:i.interval)){const e=new k({clockFace:this.clockFace,tipsWrapper:this.tipsWrapper,array:t(this.hour,p)?_:T});(null===(o=this._disabledTime)||void 0===o?void 0:o.value.startType)===(null===(l=this._disabledTime)||void 0===l?void 0:l.value.endType)?setTimeout((()=>{var i,t,s,o;(null===(i=this._disabledTime)||void 0===i?void 0:i.value.startType)===(null===(t=this.activeTypeMode)||void 0===t?void 0:t.textContent)?e.updateDisable(Object.assign({hoursToUpdate:null===(o=null===(s=this._disabledTime)||void 0===s?void 0:s.value)||void 0===o?void 0:o.rangeArrHour},this._getDestructuringObj())):e.clean()}),300):setTimeout((()=>{e.updateDisable(Object.assign({},this._getDestructuringObj(!0)))}),300),e.updateDisable()}s(this._element,"selectamtypemode",{hour:this.hour.value,minutes:this.minutes.value,type:null===(n=this.activeTypeMode)||void 0===n?void 0:n.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes})}))}))},this._handlePmClick=()=>{this._clickTouchEvents.forEach((e=>{this.PM.addEventListener(e,(e=>{var i,o,l,n;if(e.target.classList.add(p),this.AM.classList.remove(p),"12h"===this._options.clockType&&(null===(i=this._options.disabledTime)||void 0===i?void 0:i.interval)){const e=new k({clockFace:this.clockFace,tipsWrapper:this.tipsWrapper,array:t(this.hour,p)?_:T});(null===(o=this._disabledTime)||void 0===o?void 0:o.value.startType)===(null===(l=this._disabledTime)||void 0===l?void 0:l.value.endType)?setTimeout((()=>{var i,t,s,o;(null===(i=this._disabledTime)||void 0===i?void 0:i.value.startType)===(null===(t=this.activeTypeMode)||void 0===t?void 0:t.textContent)?e.updateDisable(Object.assign({hoursToUpdate:null===(o=null===(s=this._disabledTime)||void 0===s?void 0:s.value)||void 0===o?void 0:o.rangeArrHour},this._getDestructuringObj())):e.clean()}),300):setTimeout((()=>{e.updateDisable(Object.assign({},this._getDestructuringObj(!0)))}),300)}s(this._element,"selectpmtypemode",{hour:this.hour.value,minutes:this.minutes.value,type:null===(n=this.activeTypeMode)||void 0===n?void 0:n.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes})}))}))},this._handleAnimationClock=()=>{this._options.animation&&setTimeout((()=>{var e;null===(e=this.clockFace)||void 0===e||e.classList.add("timepicker-ui-clock-animation"),setTimeout((()=>{var e;null===(e=this.clockFace)||void 0===e||e.classList.remove("timepicker-ui-clock-animation")}),600)}),150)},this._handleAnimationSwitchTipsMode=()=>{this.clockHand.classList.add("timepicker-ui-tips-animation"),setTimeout((()=>{var e;null===(e=this.clockHand)||void 0===e||e.classList.remove("timepicker-ui-tips-animation")}),401)},this._handleClasses24h=(e,i)=>{var t;const s=e.target;this.hourTips&&"24h"===this._options.clockType&&(Number(s.textContent)>12||0===Number(s.textContent)?this._setCircleClockClasses24h():this._removeCircleClockClasses24h(),this._options.mobile||null===(t=this.tipsWrapperFor24h)||void 0===t||t.classList.remove("timepicker-ui-tips-wrapper-24h-disabled")),s&&i&&(i.value=s.value.replace(/\D+/g,""),i.click())},this._handleHourEvents=()=>{var e,i;this._inputEvents.forEach((e=>{var i;null===(i=this.hour)||void 0===i||i.addEventListener(e,(e=>{var i,o,l,n,r;const a=e.target;if(null!==this.clockFace&&this._handleAnimationSwitchTipsMode(),"24h"===this._options.clockType&&(Number(a.value)>12||0===Number(a.value)?this._setCircleClockClasses24h():this._removeCircleClockClasses24h(),this._options.mobile||null===(i=this.tipsWrapperFor24h)||void 0===i||i.classList.remove("timepicker-ui-tips-wrapper-24h-disabled")),this._setHoursToClock(a.value),a.classList.add(p),this.minutes.classList.remove(p),"12h"===this._options.clockType&&(null===(o=this._options.disabledTime)||void 0===o?void 0:o.interval)){const e=new k({clockFace:this.clockFace,tipsWrapper:this.tipsWrapper,array:t(this.hour,p)?_:T});(null===(l=this._disabledTime)||void 0===l?void 0:l.value.startType)===(null===(n=this._disabledTime)||void 0===n?void 0:n.value.endType)?setTimeout((()=>{var i,t,s,o;(null===(i=this._disabledTime)||void 0===i?void 0:i.value.startType)===(null===(t=this.activeTypeMode)||void 0===t?void 0:t.textContent)?e.updateDisable(Object.assign({hoursToUpdate:null===(o=null===(s=this._disabledTime)||void 0===s?void 0:s.value)||void 0===o?void 0:o.rangeArrHour},this._getDestructuringObj())):e.clean()}),300):setTimeout((()=>{e.updateDisable(Object.assign({},this._getDestructuringObj(!0)))}),300)}s(this._element,"selecthourmode",{hour:this.hour.value,minutes:this.minutes.value,type:null===(r=this.activeTypeMode)||void 0===r?void 0:r.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes}),null!==this.clockFace&&this.circle.classList.remove("small-circle")}))})),null===(e=this.hour)||void 0===e||e.addEventListener("blur",(e=>this._handleClasses24h(e,this.hour))),null===(i=this.hour)||void 0===i||i.addEventListener("focus",(e=>this._handleClasses24h(e,this.hour)))},this._handleMinutesEvents=()=>{var e,i;this._inputEvents.forEach((e=>{this.minutes.addEventListener(e,(e=>{var i,o,l,n,r,a;const u=e.target;if(null!==this.clockFace&&(this._handleAnimationSwitchTipsMode(),this._setMinutesToClock(u.value)),"24h"===this._options.clockType&&(this._removeCircleClockClasses24h(),this._options.mobile||null===(i=this.tipsWrapperFor24h)||void 0===i||i.classList.add("timepicker-ui-tips-wrapper-24h-disabled")),u.classList.add(p),null===(o=this.hour)||void 0===o||o.classList.remove(p),"12h"===this._options.clockType&&(null===(l=this._options.disabledTime)||void 0===l?void 0:l.interval)){const e=new k({clockFace:this.clockFace,tipsWrapper:this.tipsWrapper,array:t(this.hour,p)?_:T});(null===(n=this._disabledTime)||void 0===n?void 0:n.value.startType)===(null===(r=this._disabledTime)||void 0===r?void 0:r.value.endType)?setTimeout((()=>{var i,t,s;(null===(i=this._disabledTime)||void 0===i?void 0:i.value.startType)===(null===(t=this.activeTypeMode)||void 0===t?void 0:t.textContent)?e.updateDisable(Object.assign({hoursToUpdate:null===(s=this._disabledTime)||void 0===s?void 0:s.value.rangeArrHour},this._getDestructuringObj())):e.clean()}),300):setTimeout((()=>{e.updateDisable(Object.assign({},this._getDestructuringObj(!0)))}),300)}s(this._element,"selectminutemode",{hour:this.hour.value,minutes:this.minutes.value,type:null===(a=this.activeTypeMode)||void 0===a?void 0:a.dataset.type,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes})}))})),null===(e=this.minutes)||void 0===e||e.addEventListener("blur",(e=>this._handleClasses24h(e,this.minutes))),null===(i=this.minutes)||void 0===i||i.addEventListener("focus",(e=>this._handleClasses24h(e,this.minutes)))},this._handleEventToMoveHand=e=>{var l,n,r,a,d,h,c,v,m,b,_,T,k,y,g,M,f,C,E,H,L,w,S,N,$,A,O,x,I,W,F,P,j,D,q,B,V,U,z,R,Y,Z,K,X,J,G,Q,ee,ie,te,se,oe,le,ne,re,ae,ue,de,he,ce,ve,me;const{target:pe,type:be,touches:_e}=e,Te=pe,{incrementMinutes:ke,incrementHours:ye,switchToMinutesAfterSelectHour:ge}=this._options;if(!i(e,this.clockFace))return;const Me=i(e,this.clockFace),fe=this.clockFace.offsetWidth/2,Ce=Me&&Math.atan2(Me.y-fe,Me.x-fe);if("mouseup"===be||"touchend"===be)return this._isTouchMouseMove=!1,void(ge&&(t(Te,"timepicker-ui-value-tips")||t(Te,"timepicker-ui-value-tips-24h")||t(Te,"timepicker-ui-tips-wrapper"))&&this.minutes.click());if("mousedown"!==be&&"mousemove"!==be&&"touchmove"!==be&&"touchstart"!==be||"mousedown"!==be&&"touchstart"!==be&&"touchmove"!==be||((t(Te,"timepicker-ui-clock-face")||t(Te,"timepicker-ui-circle-hand")||t(Te,"timepicker-ui-hour-time-12")||t(Te,"timepicker-ui-minutes-time")||t(Te,"timepicker-ui-clock-hand")||t(Te,"timepicker-ui-value-tips")||t(Te,"timepicker-ui-value-tips-24h")||t(Te,"timepicker-ui-tips-wrapper")||t(Te,"timepicker-ui-tips-wrapper-24h"))&&!t(Te,"timepicker-ui-tips-disabled")?(e.preventDefault(),this._isTouchMouseMove=!0):this._isTouchMouseMove=!1),!this._isTouchMouseMove)return;if(null!==this.minutesTips){this.minutes.classList.add(p);let e,i=Ce&&o(Math.trunc(180*Ce/Math.PI)+90,ke,6);if(void 0===i)return;if(i<0?(e=Math.round(360+i/6)%60,i=360+6*Math.round(i/6)):(e=Math.round(i/6)%60,i=6*Math.round(i/6)),null===(l=this._disabledTime)||void 0===l?void 0:l.value.isInterval)if((null===(d=this._disabledTime)||void 0===d?void 0:d.value.endType)===(null===(h=this._disabledTime)||void 0===h?void 0:h.value.startType)){if((null===(m=null===(v=null===(c=this._disabledTime)||void 0===c?void 0:c.value)||void 0===v?void 0:v.endMinutes)||void 0===m?void 0:m.includes(e<=9?`0${e}`:`${e}`))&&this.hour.value===(null===(_=null===(b=this._disabledTime)||void 0===b?void 0:b.value)||void 0===_?void 0:_.removedEndHour)&&(null===(T=this._disabledTime)||void 0===T?void 0:T.value.endType)===(null===(k=this.activeTypeMode)||void 0===k?void 0:k.textContent))return;if((null===(M=null===(g=null===(y=this._disabledTime)||void 0===y?void 0:y.value)||void 0===g?void 0:g.startMinutes)||void 0===M?void 0:M.includes(e<=9?`0${e}`:`${e}`))&&this.hour.value===(null===(C=null===(f=this._disabledTime)||void 0===f?void 0:f.value)||void 0===C?void 0:C.removedStartedHour)&&(null===(E=this._disabledTime)||void 0===E?void 0:E.value.startType)===(null===(H=this.activeTypeMode)||void 0===H?void 0:H.textContent))return}else{if((null===(L=this.activeTypeMode)||void 0===L?void 0:L.textContent)===(null===(w=this._disabledTime)||void 0===w?void 0:w.value.endType)&&((null===($=null===(N=null===(S=this._disabledTime)||void 0===S?void 0:S.value)||void 0===N?void 0:N.endMinutes)||void 0===$?void 0:$.includes(e<=9?`0${e}`:`${e}`))&&(null===(A=this._disabledTime)||void 0===A?void 0:A.value.removedPmHour)===this.hour.value||(null===(O=this._disabledTime)||void 0===O?void 0:O.value.pmHours.map(Number).includes(Number(this.hour.value)))))return;if((null===(x=this.activeTypeMode)||void 0===x?void 0:x.textContent)===(null===(I=this._disabledTime)||void 0===I?void 0:I.value.startType)&&((null===(P=null===(F=null===(W=this._disabledTime)||void 0===W?void 0:W.value)||void 0===F?void 0:F.startMinutes)||void 0===P?void 0:P.includes(e<=9?`0${e}`:`${e}`))&&(null===(j=this._disabledTime)||void 0===j?void 0:j.value.removedAmHour)===this.hour.value||(null===(D=this._disabledTime)||void 0===D?void 0:D.value.amHours.map(Number).includes(Number(this.hour.value)))))return}else if(null===(a=null===(r=null===(n=this._disabledTime)||void 0===n?void 0:n.value)||void 0===r?void 0:r.minutes)||void 0===a?void 0:a.includes(e<=9?`0${e}`:`${e}`))return;this.minutes.value=e>=10?`${e}`:`0${e}`,this.clockHand.style.transform=`rotateZ(${i}deg)`,this._degreesMinutes=i,this._toggleClassActiveToValueTips(this.minutes.value),this._removeBgColorToCirleWithMinutesTips(),this._setBgColorToCircleWithMinutesTips(),s(this._element,"update",Object.assign(Object.assign({},u(this.input,this._options.clockType)),{degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes,eventType:be,type:null===(q=this.activeTypeMode)||void 0===q?void 0:q.dataset.type}))}const Ee=_e?_e[0]:void 0,He=_e&&Ee?document.elementFromPoint(Ee.clientX,Ee.clientY):null;if(null!==this.hourTips){if(null===(B=this.hour)||void 0===B||B.classList.add(p),!t(He||Te,"timepicker-ui-value-tips-24h")&&!t(He||Te,"timepicker-ui-tips-disabled")&&(t(He||Te,"timepicker-ui-value-tips")||t(He||Te,"timepicker-ui-tips-wrapper"))){let e,i=Ce&&o(Math.trunc(180*Ce/Math.PI)+90,ye,30);if(this._degreesHours=i,void 0===i)return;i<0?(e=Math.round(360+i/30)%12,i=360+i):(e=Math.round(i/30)%12,(0===e||e>12)&&(e=12));const t=(null===(V=this._disabledTime)||void 0===V?void 0:V.value.isInterval)?"rangeArrHour":"hours";if((null===(U=this._disabledTime)||void 0===U?void 0:U.value.endType)===(null===(R=null===(z=this._disabledTime)||void 0===z?void 0:z.value)||void 0===R?void 0:R.startType)){if("string"==typeof(null===(Z=null===(Y=this._disabledTime)||void 0===Y?void 0:Y.value)||void 0===Z?void 0:Z.endType)){if((null===(X=null===(K=this._disabledTime)||void 0===K?void 0:K.value)||void 0===X?void 0:X.endType)===(null===(J=this.activeTypeMode)||void 0===J?void 0:J.textContent)&&(null===(Q=null===(G=this._disabledTime)||void 0===G?void 0:G.value)||void 0===Q?void 0:Q.startType)===(null===(ee=this.activeTypeMode)||void 0===ee?void 0:ee.textContent)&&(null===(te=null===(ie=this._disabledTime)||void 0===ie?void 0:ie.value[t])||void 0===te?void 0:te.includes(e.toString())))return}else if(null===(oe=null===(se=this._disabledTime)||void 0===se?void 0:se.value[t])||void 0===oe?void 0:oe.includes(e.toString()))return}else{if((null===(le=this._disabledTime)||void 0===le?void 0:le.value.startType)===(null===(ne=this.activeTypeMode)||void 0===ne?void 0:ne.textContent)&&(null===(re=this._disabledTime)||void 0===re?void 0:re.value.amHours.includes(e.toString())))return;if((null===(ae=this._disabledTime)||void 0===ae?void 0:ae.value.endType)===(null===(ue=this.activeTypeMode)||void 0===ue?void 0:ue.textContent)&&(null===(de=this._disabledTime)||void 0===de?void 0:de.value.pmHours.includes(e.toString())))return}this.clockHand.style.transform=`rotateZ(${i}deg)`,this.hour.value=e>9?`${e}`:`0${e}`,this._removeCircleClockClasses24h(),this._toggleClassActiveToValueTips(e)}if((t(He||Te,"timepicker-ui-value-tips-24h")||t(He||Te,"timepicker-ui-tips-wrapper-24h"))&&!t(He||Te,"timepicker-ui-tips-disabled")){let e,i=Ce&&o(Math.trunc(180*Ce/Math.PI)+90,ye,30);if(this._degreesHours=i,void 0===i)return;i<0?(e=Math.round(360+i/30)%24,i=360+i):(e=Math.round(i/30)+12,12===e&&(e="00"));const t=(null===(he=this._disabledTime)||void 0===he?void 0:he.value.isInterval)?"rangeArrHour":"hours";if(null===(ve=null===(ce=this._disabledTime)||void 0===ce?void 0:ce.value[t])||void 0===ve?void 0:ve.includes(e.toString()))return;this._setCircleClockClasses24h(),this.clockHand.style.transform=`rotateZ(${i}deg)`,this.hour.value=`${e}`,this._toggleClassActiveToValueTips(e)}s(this._element,"update",Object.assign(Object.assign({},u(this.input,this._options.clockType)),{degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes,eventType:be,type:null===(me=this.activeTypeMode)||void 0===me?void 0:me.dataset.type}))}},this._toggleClassActiveToValueTips=e=>{const i=this.allValueTips.find((i=>Number(i.innerText)===Number(e)));this.allValueTips.map((e=>e.classList.remove(p))),void 0!==i&&i.classList.add(p)},this._handleMoveHand=()=>{this._options.mobile||this._isMobileView||m.split(" ").forEach((e=>{"touchstart"===e||"touchmove"===e||"touchend"===e?document.addEventListener(e,this._mutliEventsMoveHandler,{passive:!1}):document.addEventListener(e,this._mutliEventsMoveHandler,!1)}))},this._setModalTemplate=()=>{if(!this._options)return;const{appendModalSelector:e}=this._options;if(""!==e&&e){const i=null===document||void 0===document?void 0:document.querySelector(e);null==i||i.insertAdjacentHTML("beforeend",this.modalTemplate)}else document.body.insertAdjacentHTML("afterend",this.modalTemplate)},this._setScrollbarOrNot=()=>{this._options.enableScrollbar?setTimeout((()=>{document.body.style.overflowY="",document.body.style.paddingRight=""}),400):(document.body.style.paddingRight=`${(()=>{const e=document.createElement("div");e.className="timepicker-ui-measure",document.body.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),i})()}px`,document.body.style.overflowY="hidden")},this._setAnimationToOpen=()=>{var e,i;null===(e=this.modalElement)||void 0===e||e.classList.add("opacity"),this._options.animation?setTimeout((()=>{var e;null===(e=this.modalElement)||void 0===e||e.classList.add("show")}),150):null===(i=this.modalElement)||void 0===i||i.classList.add("show")},this._removeAnimationToClose=()=>{var e;this.modalElement&&(this._options.animation?setTimeout((()=>{var e;null===(e=this.modalElement)||void 0===e||e.classList.remove("show")}),150):null===(e=this.modalElement)||void 0===e||e.classList.remove("show"))},this._handlerViewChange=()=>y((()=>{var e,i,s,o;const{clockType:l}=this._options;if(t(this.modalElement,"mobile")){const e=d(this.hour.value,"hour",l),t=d(this.minutes.value,"minutes",l);if(!1===e||!1===t)return t||this.minutes.classList.add("invalid-value"),void(e||null===(i=this.hour)||void 0===i||i.classList.add("invalid-value"));!0===e&&!0===t&&(t&&this.minutes.classList.remove("invalid-value"),e&&(null===(s=this.hour)||void 0===s||s.classList.remove("invalid-value"))),this.close()(),this._isMobileView=!1,this._options.mobile=!1;const n=this.hour.value,r=this.minutes.value,a=null===(o=this.activeTypeMode)||void 0===o?void 0:o.dataset.type;setTimeout((()=>{this.destroy(),this.update({options:{mobile:!1}}),setTimeout((()=>{if(this.open(),this.hour.value=n,this.minutes.value=r,"12h"===this._options.clockType){const e="PM"===a?"AM":"PM";this["PM"===a?"PM":"AM"].classList.add(p),this[e].classList.remove(p)}this._setTransformToCircleWithSwitchesHour(this.hour.value),this._toggleClassActiveToValueTips(this.hour.value),Number(this.hour.value)>12||0===Number(this.hour.value)?this._setCircleClockClasses24h():this._removeCircleClockClasses24h()}),300)}),300)}else{this.close()(),this._isMobileView=!0,this._options.mobile=!0;const i=this.hour.value,t=this.minutes.value,s=null===(e=this.activeTypeMode)||void 0===e?void 0:e.dataset.type;setTimeout((()=>{this.destroy(),this.update({options:{mobile:!0}}),setTimeout((()=>{if(this.open(),this.hour.value=i,this.minutes.value=t,"12h"===this._options.clockType){const e="PM"===s?"AM":"PM";this["PM"===s?"PM":"AM"].classList.add(p),this[e].classList.remove(p)}}),300)}),300)}}),this._options.delayHandler||300),this._handleIconChangeView=()=>e(this,void 0,void 0,(function*(){this._options.enableSwitchIcon&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?this.keyboardClockIcon.addEventListener("touchstart",this._handlerViewChange()):this.keyboardClockIcon.addEventListener("click",this._handlerViewChange()))})),this._handlerClickHourMinutes=i=>e(this,void 0,void 0,(function*(){var e,s;if(!this.modalElement)return;const{clockType:o,editable:l}=this._options,n=i.target,r=d(this.hour.value,"hour",o),a=d(this.minutes.value,"minutes",o);l&&(t(n,"timepicker-ui-hour")||t(n,"timepicker-ui-minutes")?!1!==r&&!1!==a||(a||this.minutes.classList.add("invalid-value"),r||null===(s=this.hour)||void 0===s||s.classList.add("invalid-value")):!0===r&&!0===a&&(a&&this.minutes.classList.remove("invalid-value"),r&&(null===(e=this.hour)||void 0===e||e.classList.remove("invalid-value"))))})),this._handleClickOnHourMobile=()=>{document.addEventListener("mousedown",this._eventsClickMobileHandler),document.addEventListener("touchstart",this._eventsClickMobileHandler)},this._handleKeyPress=e=>{"Escape"===e.key&&this.modalElement&&this.close()()},this._handleEscClick=()=>{document.addEventListener("keydown",this._handleKeyPress)},this._focusTrapHandler=()=>{setTimeout((()=>{var e,i;const s=null===(e=this.wrapper)||void 0===e?void 0:e.querySelectorAll('div[tabindex="0"]:not([disabled])'),o=null===(i=this.wrapper)||void 0===i?void 0:i.querySelectorAll('input[tabindex="0"]:not([disabled])');if(!s||s.length<=0||o.length<=0)return;const l=[...o,...s],n=l[0],r=l[l.length-1];this.wrapper.focus(),this.wrapper.addEventListener("keydown",(({key:e,shiftKey:i,target:s})=>{const o=s;if("Tab"===e&&(i?document.activeElement===n&&r.focus():document.activeElement===r&&n.focus()),"Enter"===e&&(t(o,"timepicker-ui-minutes")&&this.minutes.click(),t(o,"timepicker-ui-hour")&&this.hour.click(),t(o,"timepicker-ui-cancel-btn")&&this.cancelButton.click(),t(o,"timepicker-ui-ok-btn")&&this.okButton.click(),t(o,"timepicker-ui-keyboard-icon-wrapper")&&this.keyboardClockIcon.click(),t(o,"timepicker-ui-am")&&this.AM.click(),t(o,"timepicker-ui-pm")&&this.PM.click(),t(o,"timepicker-ui-value-tips")||t(o,"timepicker-ui-value-tips-24h"))){const{left:e,top:i,x:s,y:l,width:n,height:r}=o.getBoundingClientRect(),a=document.elementFromPoint(s,l),u=()=>{var s;const o=new MouseEvent("mousedown",{clientX:e+n/2,clientY:i+r/2,cancelable:!0,bubbles:!0});t(a,"timepicker-ui-value-tips-24h")?null==a||a.dispatchEvent(o):null===(s=null==a?void 0:a.childNodes[0])||void 0===s||s.dispatchEvent(o),this._isTouchMouseMove=!1};u()}setTimeout((()=>{this.wrapper.addEventListener("mousedown",(()=>document.activeElement.blur()))}),100)}))}),301)},this._handleOpenOnEnterFocus=()=>{this.input.addEventListener("keydown",(({target:e,key:i})=>{e.disabled||"Enter"===i&&this.open()}))},this._element=l,this._cloned=null,this._options=((e,i)=>Object.assign(Object.assign({},i),e))(Object.assign(Object.assign({},n),(e=>{if(!e)return;const i=JSON.parse(JSON.stringify(e)),t=Object.keys(i);return Object.values(i).reduce(((e,i,s)=>(Number(i)?e[t[s]]=Number(i):e[t[s]]="true"===i||"false"===i?JSON.parse(i):i,e)),{})})(null===(g=this._element)||void 0===g?void 0:g.dataset)),v),this._isTouchMouseMove=!1,this._degreesHours=30*Number(u(null===(M=this._element)||void 0===M?void 0:M.querySelector("input"),this._options.clockType).hour),this._degreesMinutes=6*Number(u(null===(f=this._element)||void 0===f?void 0:f.querySelector("input"),this._options.clockType).minutes),this._isMobileView=!1,this._mutliEventsMove=e=>this._handleEventToMoveHand(e),this._mutliEventsMoveHandler=this._mutliEventsMove.bind(this),this._eventsClickMobile=e=>this._handlerClickHourMinutes(e),this._eventsClickMobileHandler=this._eventsClickMobile.bind(this),this._checkMobileOption(),this._clickTouchEvents=["click","mousedown","touchstart"],this._inputEvents=["change",...this._clickTouchEvents],this._disabledTime=null,this._preventClockTypeByCurrentTime(),this._isModalRemove=!0}get modalTemplate(){return this._options.mobile&&this._isMobileView?(e=>{const{mobileTimeLabel:i,amLabel:t,pmLabel:s,cancelLabel:o,okLabel:l,iconTemplateMobile:n,minuteMobileLabel:r,hourMobileLabel:a,enableSwitchIcon:u,animation:d,clockType:h}=e;return`\n  <div class="timepicker-ui-modal normalize mobile" role="dialog" style='transition:${d?"opacity 0.15s linear":"none"}'>\n    <div class="timepicker-ui-wrapper mobile" tabindex="0">\n      <div class="timepicker-ui-header mobile">\n        <div class="timepicker-ui-select-time mobile">${i}</div>\n        <div class="timepicker-ui-wrapper-time mobile">\n          <input class="timepicker-ui-hour mobile" tabindex="0" type="number" min="0" max="${"12h"===h?"12":"23"}" />\n          <div class="timepicker-ui-hour-text mobile">${a}</div>\n          <div class="timepicker-ui-dots mobile">:</div>  \n          <div class="timepicker-ui-minute-text mobile">${r}</div>\n          <input class="timepicker-ui-minutes mobile" tabindex="0" type="number" min="0" max="59" /> \n        </div>\n  ${"24h"!==h?`<div class="timepicker-ui-wrapper-type-time mobile">\n          <div class="timepicker-ui-type-mode timepicker-ui-am mobile" data-type="AM" tabindex="0">${t}</div>    \n          <div class="timepicker-ui-type-mode timepicker-ui-pm mobile" data-type="PM" tabindex="0">${s}</div>    \n        </div>`:""}\n      </div>\n      <div class="timepicker-ui-footer mobile" data-view="mobile">\n      ${u?`\n      <div class="timepicker-ui-keyboard-icon-wrapper mobile" role="button" aria-pressed="false" data-view="desktop" tabindex="0">\n      ${n}\n      </div>`:""}\n      <div class="timepicker-ui-wrapper-btn mobile">\n        <div class="timepicker-ui-cancel-btn mobile" role="button" aria-pressed="false" tabindex="0">${o}</div>\n        <div class="timepicker-ui-ok-btn mobile" role="button" aria-pressed="false" tabindex="0">${l}</div>\n      </div>\n      </div>\n    </div>  \n  </div>`})(this._options):(e=>{const{iconTemplate:i,timeLabel:t,amLabel:s,pmLabel:o,cancelLabel:l,okLabel:n,enableSwitchIcon:r,animation:a,clockType:u,editable:d}=e;return`\n  <div class="timepicker-ui-modal normalize" role="dialog" style='transition:${a?"opacity 0.15s linear":"none"}'>\n    <div class="timepicker-ui-wrapper" tabindex="0">\n      <div class="timepicker-ui-header">\n        <div class="timepicker-ui-select-time">${t}</div>\n        <div class="timepicker-ui-wrapper-time ${"24h"===u?"timepicker-ui-wrapper-time-24h":""}">\n          <input ${d?"":"readonly"} class="timepicker-ui-hour" tabindex="0" type="number" min="0" max="${"12h"===u?"12":"23"}" />\n          <div class="timepicker-ui-dots">:</div>    \n          <input ${d?"":"readonly"} class="timepicker-ui-minutes" tabindex="0" type="number" min="0" max="59" /> \n        </div>\n      ${"24h"!==u?`\n      <div class="timepicker-ui-wrapper-type-time">\n        <div class="timepicker-ui-type-mode timepicker-ui-am" tabindex="0" role="button" data-type="AM">${s}</div>    \n        <div class="timepicker-ui-type-mode timepicker-ui-pm" tabindex="0" role="button" data-type="PM">${o}</div>    \n      </div>\n      `:""}\n      </div>\n      <div class="timepicker-ui-wrapper-landspace">\n        <div class="timepicker-ui-body">\n          <div class="timepicker-ui-clock-face">\n            <div class="timepicker-ui-dot"></div>\n            <div class="timepicker-ui-clock-hand">\n              <div class="timepicker-ui-circle-hand"></div>\n            </div>\n            <div class="timepicker-ui-tips-wrapper"></div>\n            ${"24h"===u?'<div class="timepicker-ui-tips-wrapper-24h"></div>':""}\n          </div>\n        </div>\n        <div class="timepicker-ui-footer">\n        ${r?`\n      <div class="timepicker-ui-keyboard-icon-wrapper" tabindex="0" role="button" aria-pressed="false" data-view="desktop">\n        ${i}\n      </div>`:""}\n        <div class="timepicker-ui-wrapper-btn" >\n          <div class="timepicker-ui-cancel-btn" tabindex="0" role="button" aria-pressed="false">${l}</div>\n          <div class="timepicker-ui-ok-btn" tabindex="0" role="button" aria-pressed="false">${n}</div>\n        </div>\n        </div>\n      </div>\n    </div>  \n  </div>`})(this._options)}get modalElement(){return document.querySelector(".timepicker-ui-modal")}get clockFace(){return document.querySelector(".timepicker-ui-clock-face")}get input(){var e;return null===(e=this._element)||void 0===e?void 0:e.querySelector("input")}get clockHand(){return document.querySelector(".timepicker-ui-clock-hand")}get circle(){return document.querySelector(".timepicker-ui-circle-hand")}get tipsWrapper(){return document.querySelector(".timepicker-ui-tips-wrapper")}get tipsWrapperFor24h(){return document.querySelector(".timepicker-ui-tips-wrapper-24h")}get minutes(){return document.querySelector(".timepicker-ui-minutes")}get hour(){return document.querySelector(".timepicker-ui-hour")}get AM(){return document.querySelector(".timepicker-ui-am")}get PM(){return document.querySelector(".timepicker-ui-pm")}get minutesTips(){return document.querySelector(".timepicker-ui-minutes-time")}get hourTips(){return document.querySelector(".timepicker-ui-hour-time-12")}get allValueTips(){return[...document.querySelectorAll(".timepicker-ui-value-tips"),...document.querySelectorAll(".timepicker-ui-value-tips-24h")]}get openElementData(){var e;const i=null===(e=this._element)||void 0===e?void 0:e.querySelectorAll("[data-open]");if((null==i?void 0:i.length)>0){const e=[];return i.forEach((({dataset:i})=>{var t;return e.push(null!==(t=i.open)&&void 0!==t?t:"")})),[...new Set(e)]}return null}get openElement(){var e,i;return null===this.openElementData?(null===(e=this.input)||void 0===e||e.setAttribute("data-open","timepicker-ui-input"),[this.input]):null!==(i=this.openElementData.map((e=>{var i;return null===(i=this._element)||void 0===i?void 0:i.querySelectorAll(`[data-open='${e}']`)}))[0])&&void 0!==i?i:""}get cancelButton(){return document.querySelector(".timepicker-ui-cancel-btn")}get okButton(){return document.querySelector(".timepicker-ui-ok-btn")}get activeTypeMode(){return document.querySelector(".timepicker-ui-type-mode.active")}get keyboardClockIcon(){return document.querySelector(".timepicker-ui-keyboard-icon-wrapper")}get footer(){return document.querySelector(".timepicker-ui-footer")}get wrapper(){return document.querySelector(".timepicker-ui-wrapper")}_checkDisabledValuesOnStart(){if(!this._options.disabledTime||this._options.disabledTime.interval)return;const{disabledTime:{hours:e,minutes:i},clockType:t}=this._options,s=!e||h(e,"hour",t),o=!i||h(i,"minutes",t);if(!s||!o)throw new Error("You set wrong hours or minutes in disabled option")}_checkMobileOption(){this._isMobileView=!!this._options.mobile,this._options.mobile&&(this._options.editable=!0)}_getDisableTime(){this._disabledTime=(e=>{if(!e)return;const{disabledTime:i,clockType:t}=e;if(!i||Object.keys(i).length<=0||"Object"!==i.constructor.name)return;const{hours:s,interval:o,minutes:r}=i;if(o){delete i.hours,delete i.minutes;const[e,s]=o.toString().split("-"),{hour:r,minutes:a,type:d}=u({value:e.trimEnd()},t),{hour:h,minutes:c,type:v}=u({value:s.trimEnd().trimStart()},t);let m=l(r,h).map((e=>"00"===e||0===Number(e)?`0${Number(e)}`:`${Number(e)}`));const p=[],b=Number(a),_=Number(c);if(v===d)return b>0&&_<=0?(p.push(m[0],m[m.length-1]),m=m.slice(1,-1)):_<59&&_>0&&b<=0?(p.push(void 0,m[m.length-1]),m=m.slice(0,-1)):_>0&&b>0?(p.push(m[0],m[m.length-1]),m=m.slice(1,-1)):0===_&&0===b&&(p.push(void 0,m[m.length-1]),m.pop()),{value:{removedStartedHour:Number(p[0])<=9?`0${p[0]}`:p[0],removedEndHour:Number(p[1])<=9?`0${p[1]}`:p[1],rangeArrHour:m,isInterval:!0,startMinutes:l(a,59).map((e=>Number(e)<=9?`0${e}`:`${e}`)),endMinutes:n(0,c).map((e=>Number(e)<=9?`0${e}`:`${e}`)),endType:v,startType:d}};{const e=l(r,12).map(String),i=n(1,h).map(String),t=[],s=[];return b>0&&_<=0?(t.push(i[i.length-1]),s.push(e[0]),i.splice(-1,1),e.splice(0,1)):_<59&&_>0&&b<=0?(s.push(e[0]),t.push(i[i.length-1]),i.splice(-1,1)):_>0&&b>0?(t.push(i[i.length-1]),s.push(e[0]),i.splice(-1,1),e.splice(0,1)):0===_&&0===b&&(t.push(i[i.length-1]),s.push(e[0]),i.pop()),{value:{isInterval:!0,endType:v,startType:d,pmHours:i,amHours:e,startMinutes:0===Number(a)?[]:l(a,59).map((e=>Number(e)<=9?`0${e}`:`${e}`)),endMinutes:n(0,c).map((e=>Number(e)<=9?`0${e}`:`${e}`)),removedAmHour:Number(s[0])<=9?`0${s[0]}`:s[0],removedPmHour:Number(t[0])<=9?`0${t[0]}`:t[0]}}}}return null==s||s.forEach((e=>{if("12h"===t&&Number(e)>12)throw new Error("The disabled hours value has to be less than 13");if("24h"===t&&Number(e)>23)throw new Error("The disabled hours value has to be less than 24")})),null==r||r.forEach((e=>{if(Number(e)>59)throw new Error("The disabled minutes value has to be less than 60")})),{value:{hours:null==s?void 0:s.map((e=>"00"===e||0===Number(e)?`0${Number(e)}`:`${Number(e)}`)),minutes:null==r?void 0:r.map((e=>Number(e)<=9?`0${e}`:`${e}`))}}})(this._options)}_removeCircleClockClasses24h(){var e,i;null===(e=this.circle)||void 0===e||e.classList.remove("timepicker-ui-circle-hand-24h"),null===(i=this.clockHand)||void 0===i||i.classList.remove("timepicker-ui-clock-hand-24h")}_setCircleClockClasses24h(){var e,i;this.circle&&(null===(e=this.circle)||void 0===e||e.classList.add("timepicker-ui-circle-hand-24h")),this.clockHand&&(null===(i=this.clockHand)||void 0===i||i.classList.add("timepicker-ui-clock-hand-24h"))}_setErrorHandler(){var e,i,t,o;const{error:l,currentHour:n,currentMin:r,currentType:a,currentLength:d}=u(this.input,this._options.clockType);if(l){const u=document.createElement("div");throw null===(e=this.input)||void 0===e||e.classList.add("timepicker-ui-invalid-format"),u.classList.add("timepicker-ui-invalid-text"),u.innerHTML="<b>Invalid Time Format</b>",(null===(i=this.input)||void 0===i?void 0:i.parentElement)&&null===(null===(t=this.input)||void 0===t?void 0:t.parentElement.querySelector(".timepicker-ui-invalid-text"))&&(null===(o=this.input)||void 0===o||o.after(u)),s(this._element,"geterror",{error:l,currentHour:n,currentMin:r,currentType:a,currentLength:d}),new Error(`Invalid Time Format: ${l}`)}}_removeErrorHandler(){var e,i;null===(e=this.input)||void 0===e||e.classList.remove("timepicker-ui-invalid-format");const t=null===(i=this._element)||void 0===i?void 0:i.querySelector(".timepicker-ui-invalid-text");t&&t.remove()}_setOnStartCSSClassesIfClockType24h(){if("24h"===this._options.clockType){let{hour:e}=u(this.input,this._options.clockType,this._options.currentTime);this.input.value.length>0&&(e=this.input.value.split(":")[0]),(Number(e)>12||0===Number(e))&&this._setCircleClockClasses24h()}}_getDestructuringObj(e){var i;const{endMinutes:t,removedEndHour:s,removedStartedHour:o,startMinutes:l,pmHours:n,amHours:r,removedAmHour:a,removedPmHour:u}=this._disabledTime.value;return e?{minutesToUpdate:{actualHour:this.hour.value,pmHours:n,amHours:r,activeMode:null===(i=this.activeTypeMode)||void 0===i?void 0:i.textContent,startMinutes:l,endMinutes:t,removedAmHour:a,removedPmHour:u}}:{minutesToUpdate:{endMinutes:t,removedEndHour:s,removedStartedHour:o,actualHour:this.hour.value,startMinutes:l}}}};
